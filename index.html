<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defter-i Mûsikî | Klasik Türk Müziği Arşivi</title>
    
    <link rel="shortcut icon" href="logo.png" type="image/x-icon">
    <link rel="icon" href="logo.png?v=1" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
     <style>
        /* Genel Fontlar */
        body { font-family: 'Inter', sans-serif; }
        .serif { font-family: 'Crimson Pro', serif; }
        .satir-link:hover { background-color: #f8fafc; }

        .nota-arkaplan-konteynir {
            background-image: url('mecmua-i-saz-u-soz-2.jpg'); /* Buraya fotoğrafın yolunu yazacaksın */
            background-size: cover;
            background-position: center;
            padding: 80px 0; /* Butonun etrafındaki boşluk */
            margin-top: 30px;
            border-radius: 8px;
            position: relative;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.2); /* Fotoğrafı biraz karartıp derinlik verir */
            display: flex;
            justify-content: center;
            align-items: center;
         }

         /* Butonu fotoğrafın üzerinde daha okunaklı yapmak için */
        #notaLink {
            backdrop-filter: blur(2px); /* Arkadaki kağıdı çok hafif flulaştırır, şık durur */
            background-color: rgba(28, 25, 23, 0.9); /* Stone-900 renginin hafif şeffaf hali */
         }
        /* Güfte Alanı - Karizmatik Kağıt Efekti */
        .kagit-efekti {
            background-color: #fdf6e3; 
            border: 1px solid #e2d1b0;
            position: relative;
            padding: 50px 20px;
            /* Köşeleri çok hafif yamuk yaparak doğal bir kağıt kesimi verdik */
            border-radius: 2px 5px 2px 10px / 5px 2px 10px 2px;
            /* Sadece hafif bir derinlik gölgesi bıraktık, o kaba gölgeleri sildik */
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        #detayGufteMetin {
            white-space: pre-line !important;
            line-height: 2.8rem;
            color: #2d2d2d;
        }
     </style>
</head> 
<body class="bg-[#f0f2f5] min-h-screen text-gray-900 pb-10">

    <div id="listeSayfasi" class="max-w-4xl mx-auto bg-white shadow-2xl rounded-2xl overflow-hidden min-h-[600px] mt-10">
        <div class="pt-10 pb-6 px-6 text-center border-b border-stone-100 bg-stone-50">
            <h1 class="text-5xl font-bold text-stone-900 serif tracking-tighter mb-2">Defter-i Mûsikî</h1>
            <p class="text-xl text-stone-600 serif italic tracking-wide">Klasik Türk Müziği Arşivi</p>
        </div>

        <div class="p-6 border-b border-gray-100">
            <input type="text" id="arama" placeholder="Eser, makam veya bestekâr ara..." 
                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-stone-500 outline-none">
        </div>
            
        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse text-sm">
                <thead class="bg-gray-50 border-b border-gray-200 text-gray-500 uppercase text-xs font-semibold">
                    <tr>
                        <th class="px-6 py-4">Eser Başlığı</th>
                        <th class="px-6 py-4">Güftekâr</th>
                        <th class="px-6 py-4">Bestekâr</th>
                        <th class="px-6 py-4 hidden md:table-cell">Makam</th>
                        <th class="px-6 py-4 hidden md:table-cell">Usûl</th>
                        <th class="px-6 py-4 hidden md:table-cell text-right">Form</th>
                    </tr>
                </thead>
                <tbody id="liste-govdesi" class="divide-y divide-gray-100 bg-white"></tbody>
            </table>
        </div>
    </div>

    <div id="detaySayfasi" class="hidden p-4 md:p-8 max-w-5xl mx-auto mt-10">
        <button onclick="anaSayfayaDon()" class="text-amber-800 font-bold mb-6 flex items-center hover:text-amber-600 transition-colors">
            <span class="mr-2 text-xl">←</span> Ana Sayfaya Dön
        </button>
        
        <div class="bg-white p-6 md:p-12 rounded-xl shadow-lg border-t-8 border-amber-800">
            <h1 id="detayAd" class="serif text-4xl md:text-5xl text-stone-800 mb-6 font-bold italic text-center leading-tight"></h1>
            
            <div class="flex flex-col space-y-4 text-stone-700 text-xl border-y border-stone-100 py-8 my-8 serif">
                <p class="flex justify-between border-b border-stone-50 pb-2"><strong>MAKAM:</strong> <span id="detayMakam"></span></p>
                <p class="flex justify-between border-b border-stone-50 pb-2"><strong>USÛL:</strong> <span id="detayUsul"></span></p>
                <p class="flex justify-between border-b border-stone-50 pb-2"><strong>GÜFTEKÂR:</strong> <span id="detayGufte"></span></p>
                <p class="flex justify-between border-b border-stone-50 pb-2"><strong>BESTEKÂR:</strong> <span id="detayBestekar"></span></p>
                <p class="flex justify-between border-b border-stone-50 pb-2"><strong>FORM:</strong> <span id="detayForm"></span></p>
            </div>

            <div id="gufteAlani" class="mt-10 kagit-efekti max-w-2xl mx-auto rounded-sm">
                <<h3 class="serif text-center text-stone-800 uppercase text-4xl mb-8 tracking-[0.5em] font-black border-b-2 border-stone-300 pb-4 w-max mx-auto">
                    Güfte
                </h3>
                <div id="detayGufteMetin" class="text-center serif text-3xl italic"></div>
            </div>

            <div id="notaAlani"></div>
        </div>
    </div>

    <script>
        const eserler = [
            {
                "id": 1,
                "eser": "Beni bîgâne-i hâb etti keder",
                "makam": "Sûznâk",
                "güftekâr": "Mechul",
                "bestekâr": "Tanbûrî Cemil Bey",
                "usûl": "Aksak",
                "form": "Şarkı",
                "nota": "notalar/beni_bigane.pdf",
                "icrâ": "https://youtu.be/h8e5R6--XjU?si=Kb_6-KZ21uKwsHBh",
                "güfte": "Beni bîgâne-i hâb etti keder\nDüşünür âh ederim tâ-be-seher\nArtırır derdimi muzlim geceler\nDüşünür âh ederim tâ-be-seher\n\nFirkat-i yâr ile kaldım nâçâr\nOldu bin dert ile gönül bîmâr\nEtti gam hâtırımı pek âzâr\nDüşünür âh ederim tâ-be-seher"
            },
            { 
                "id": 11, 
                "eser": "Hâtır-ı nâşâdı gel gör bir nefes şâd et beni", 
                "makam": "Segâh", 
                "güftekâr": "Mechul", 
                "bestekâr": "Tanbûrî Cemil Bey", 
                "usûl": "Ağır aksak", 
                "form": "Şarkı", "nota": "", 
                "icrâ": "https://youtu.be/iyaAJ7eYIR8?si=JbEKaFS2ugBSlALT", 
                "güfte": "Hâtır-ı nâşâdı gel gör bir nefes şâd et beni\nKayd-ı hicrândan a zâlim artık âzâd et beni\nHasretinle pek harâbım bârî âbâd et beni\nKayd-ı hicrândan a zâlim artık âzâd et beni\nEy cefâ-cû eyle insâf âşık-ı bîçârene\nMerhem-i lutfunla imdât eyle gel âvârene\nKayd-ı hicrândan a zâlim artık âzâd et beni" 
            },
            { "id": 12, "eser": "Hep sâye-i vaslında gönül şâd olacakken", "makam": "Hicaz", "güftekâr": "Tanbûrî Cemil Bey", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Sengin semâî", "form": "Şarkı", "nota": "", "icrâ": "", "sozler": "Hep sâye-i vaslında..." },
            { "id": 13, "eser": "Hicrinle füzûn olmadan ahzân-ı mezâlim", "makam": "Kürdîli-hicâzkâr", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak", "form": "Şarkı", "nota": "", "icrâ": "", "sozler": "Hicrinle füzûn..." },
            { "id": 14, "eser": "Mâtemzedeyim külbe-i ahzânımı gel gör", "makam": "Hicaz", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak", "form": "Şarkı", "nota": "", "icrâ": "", "sozler": "Mâtemzedeyim..." },
            { "id": 15, "eser": "Nazîrin yok senin ey mâh yerde", "makam": "Evc", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak semâî", "form": "Şarkı", "nota": "", "icrâ": "", "sozler": "Nazîrin yok senin..." },
            { "id": 16, "eser": "Nihândır dîdeden gerçi cemâlin", "makam": "Müstear", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Yürük semâî", "form": "Şarkı", "nota": "", "icrâ": "", "sozler": "Nihândır dîdeden..." },
            { "id": 17, "eser": "Pür-lerze olur rûyini gördükçe cenânım", "makam": "Muhayyer", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Sengin semâî", "form": "Şarkı", "nota": "", "icrâ": "", "sozler": "Pür-lerze olur..." },
            { "id": 18, "eser": "Sen gül eğlen şâd-mân ol", "makam": "Mâhur", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Ağır aksak", "form": "Şarkı", "nota": "", "icrâ": "", "sozler": "Sen gül eğlen..." },
            { "id": 19, "eser": "Sevdim seni ey işve-bâz", "makam": "Nihâvend", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Semâî", "form": "Şarkı", "nota": "", "icrâ": "", "sozler": "Sevdim seni..." },
            { "id": 20, "eser": "Var iken zâtında böyle hüsn ü ân olma nihân", "makam": "Mâhur", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Ağır aksak", "form": "Şarkı", "nota": "", "icrâ": "", "sozler": "Var iken zâtında..." }
        ];

        function temizle(metin) {
        if (!metin) return "";
        return metin.toString().replace(/İ/g, "i").replace(/I/g, "i").toLowerCase()
            .replace(/â/g, "a").replace(/î/g, "i").replace(/û/g, "u")
            .replace(/ı/g, "i").replace(/ğ/g, "g").replace(/ü/g, "u")
            .replace(/ş/g, "s").replace(/ö/g, "o").replace(/ç/g, "c").trim();
    }

    function listele(filtre = '') {
        const govde = document.getElementById('liste-govdesi');
        if (!govde) return;
        const aramaTerimi = temizle(filtre);
        const sonuc = eserler.filter(item => temizle(item.eser).includes(aramaTerimi) || temizle(item.makam).includes(aramaTerimi));
        govde.innerHTML = '';
        sonuc.forEach(item => {
            const satir = document.createElement('tr');
            satir.className = "satir-link border-b border-gray-100";
            satir.innerHTML = `
                <td class="px-6 py-4">
                    <a href="?id=${item.id}" onclick="if(!event.ctrlKey && !event.metaKey){event.preventDefault(); detayGoster(${item.id});}" class="block font-semibold text-blue-600 serif text-lg hover:underline">${item.eser}</a>
                </td>
                <td class="px-6 py-4 text-gray-600">${item.güftekâr}</td>
                <td class="px-6 py-4 text-gray-600">${item.bestekâr}</td>
                <td class="px-6 py-4 hidden md:table-cell"><span class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold">${item.makam}</span></td>
                <td class="px-6 py-4 hidden md:table-cell text-gray-600">${item.usûl || item.usul}</td>
                <td class="px-6 py-4 hidden md:table-cell text-gray-600">${item.form}</td>`;
            govde.appendChild(satir);
        });
    }

    function detayGoster(id, pushState = true) {
        const eser = eserler.find(e => e.id === id);
        if (eser) {
            document.getElementById('detayAd').innerText = eser.eser;
            document.getElementById('detayMakam').innerText = eser.makam;
            document.getElementById('detayUsul').innerText = eser.usûl || "Belirtilmemiş";
            document.getElementById('detayGufte').innerText = eser.güftekâr;
            document.getElementById('detayBestekar').innerText = eser.bestekâr;
            document.getElementById('detayForm').innerText = eser.form;
            document.getElementById('detayGufteMetin').innerText = eser.güfte || eser.sozler || "Güfte henüz eklenmemiş.";
            
            const notaAlani = document.getElementById('notaAlani');
            let vId = "";
            if (eser.icrâ) {
                if (eser.icrâ.includes('v=')) {
                    vId = eser.icrâ.split('v=')[1].split('&')[0];
                } else if (eser.icrâ.includes('youtu.be/')) {
                    vId = eser.icrâ.split('youtu.be/')[1].split('?')[0];
                } else {
                    vId = eser.icrâ; // Eğer sadece kod yazdıysan direkt onu kullanır
                }
            }
            
            notaAlani.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 border-t border-stone-200 pt-10 mt-10">
                    <div class="nota-arkaplan-konteynir">
                        ${eser.nota ? `
                            <a id="notaLink" href="${eser.nota}" target="_blank" 
                               class="px-10 py-4 text-stone-100 serif text-xl tracking-widest uppercase rounded-sm shadow-2xl hover:scale-105 transition-all border border-stone-500">
                               Notayı Görüntüle
                            </a>
                        ` : "<span class='text-stone-400 serif italic'>Nota Arşivi Hazırlanıyor</span>"}
                    </div>

                    <div class="flex items-center justify-center bg-black rounded-sm shadow-lg overflow-hidden border border-stone-200">
                        ${vId ? `
                            <div class="w-full relative" style="padding-top: 56.25%;"> <iframe
                                class="absolute top-0 left-0 w-full h-full" 
                                src="https://www.youtube.com/embed/${vId}?rel=0&modestbranding=1" 
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen>
                            </iframe>
                        </div>
                    ` : "<div class='p-10 text-stone-400 serif italic'>Henüz İcrâ Eklenmedi</div>"}
                </div>
            </div>`;

        document.getElementById('listeSayfasi').classList.add('hidden');
        document.getElementById('detaySayfasi').classList.remove('hidden');
        if (pushState) window.history.pushState({id: id}, "", "?id=" + id);
        window.scrollTo(0, 0);
    }
}

    function anaSayfayaDon(pushState = true) {
        document.getElementById('detaySayfasi').classList.add('hidden');
        document.getElementById('listeSayfasi').classList.remove('hidden');
        if (pushState) window.history.pushState({}, "", window.location.pathname);
    }

    window.onpopstate = (e) => { if (e.state && e.state.id) detayGoster(e.state.id, false); else anaSayfayaDon(false); };
    window.onload = () => { 
        const id = new URLSearchParams(window.location.search).get('id'); 
        if (id) detayGoster(parseInt(id), false); else listele(); 
    };
    document.getElementById('arama').addEventListener('input', (e) => listele(e.target.value));
</script>
</body>
</html>
