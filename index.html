<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Defter-i Mûsikî</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .serif { font-family: 'Crimson Pro', serif; }
        .makam-format::first-letter { text-transform: uppercase; }
    </style>
</head> 
<body class="bg-[#f0f2f5] p-4">

    <div id="listeSayfasi" class="max-w-6xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
        <div class="p-6 border-b border-gray-100">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 italic serif">Defter-i Mûsikî Arşivi</h2>
            <input type="text" id="arama" placeholder="Arama yapın (Şapkasız yazabilirsiniz...)" 
                   class="w-full p-3 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        
        <div class="overflow-x-auto">
            <table class="w-full text-left text-sm">
                <thead class="bg-gray-50 border-b border-gray-200 text-gray-500 uppercase text-xs">
                    <tr>
                        <th class="px-6 py-4">Eser Başlığı</th>
                        <th class="px-6 py-4">Güftekâr</th>
                        <th class="px-6 py-4">Bestekâr</th>
                        <th class="px-6 py-4">Makam</th>
                    </tr>
                </thead>
                <tbody id="liste-govdesi" class="divide-y divide-gray-100"></tbody>
            </table>
        </div>
    </div>

    <div id="detaySayfasi" class="hidden max-w-4xl mx-auto p-8 bg-white rounded-xl shadow-lg border-t-8 border-amber-800 mt-10">
        <button onclick="location.reload()" class="text-amber-800 font-bold mb-6">← Listeye Dön</button>
        <h1 id="detayAd" class="serif text-4xl text-center font-bold mb-8 italic"></h1>
        <div id="detayBilgi" class="text-xl serif border-y py-4 leading-loose"></div>
        <div id="notaAlani" class="mt-8 text-center bg-gray-50 p-4 rounded border"></div>
    </div>

    <script>
        // 1. TEMİZLİKÇİ
        function temizle(metin) {
            if (!metin) return "";
            return metin.toString().replace(/İ/g, "i").replace(/I/g, "i").toLowerCase()
                .replace(/â/g, "a").replace(/î/g, "i").replace(/û/g, "u")
                .replace(/ı/g, "i").replace(/ğ/g, "g").replace(/ü/g, "u")
                .replace(/ş/g, "s").replace(/ö/g, "o").replace(/ç/g, "c").trim();
        }

        // 2. VERİLER (Senin listen)
        const eserler = [
            {"id": 1, "eser": "Beni bîgâne-i hâb etti keder", "makam": "Sûznâk", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak", "form": "Şarkı", "resim": ""},
            {"id": 2, "eser": "Bir nigâhın gönlümü etti esîr-i aşkın âh", "makam": "Evc", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak", "form": "Şarkı", "resim": ""},
            {"id": 3, "eser": "Bir perî-sîmâ güzelsin hüsnüne yoktur bahâ", "makam": "Sultânî-yegâh", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Devr-i hindî", "form": "Şarkı", "resim": ""},
            {"id": 4, "eser": "Dağda tavşanlar uyur ninni", "makam": "Hicaz", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Sofyan", "form": "Ninni", "resim": ""},
            {"id": 5, "eser": "Def-i nâliş eylerim hep seyr-i ruhsârınla ben", "makam": "Kürdîli-hicâzkâr", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak", "form": "Şarkı", "resim": ""},
            {"id": 6, "eser": "Feryâd ki feryâdıma imdâd edecek yok", "makam": "Şehnaz", "güftekâr": "Nigâr Hanım", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Sengin semâî", "form": "Şarkı", "resim": ""},
            {"id": 7, "eser": "Gel ey sâki bana sun bir piyâle", "makam": "Segâh", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak", "form": "Şarkı", "resim": ""},
            {"id": 8, "eser": "Görmek ister gözlerim her dem seni", "makam": "Hüseynî", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Devr-i hindî", "form": "Şarkı", "resim": ""},
            {"id": 9, "eser": "Gül gonce-i ümîd gibi gel açıl ey gül", "makam": "Gülizâr", "güftekâr": "Mahmut Şevket Özdönmez", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Sengin semâî", "form": "Şarkı", "resim": ""},
            {"id": 10, "eser": "Gülsitâne eyleyip tercîh bir vîrâneyi", "makam": "Şevkefzâ", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Yürük semâî", "form": "Şarkı", "resim": ""},
            {"id": 11, "eser": "Hâtır-ı nâşâdı gel gör bir nefes şâd et beni", "makam": "Segâh", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Ağır aksak", "form": "Şarkı", "resim": ""},
            {"id": 12, "eser": "Hep sâye-i vaslında gönül şâd olacakken", "makam": "Hicaz", "güftekâr": "Tanbûrî Cemil Bey", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Sengin semâî", "form": "Şarkı", "resim": ""},
            {"id": 13, "eser": "Hicrinle füzûn olmadan ahzân-ı mezâlim", "makam": "Kürdîli-hicâzkâr", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak", "form": "Şarkı", "resim": ""},
            {"id": 14, "eser": "Mâtemzedeyim külbe-i ahzânımı gel gör", "makam": "Hicaz", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak", "form": "Şarkı", "resim": ""},
            {"id": 15, "eser": "Nazîrin yok senin ey mâh yerde", "makam": "Evc", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Aksak semâî", "form": "Şarkı", "resim": ""},
            {"id": 16, "eser": "Nihândır dîdeden gerçi cemâlin", "makam": "Müstear", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Yürük semâî", "form": "Şarkı", "resim": ""},
            {"id": 17, "eser": "Pür-lerze olur rûyini gördükçe cenânım", "makam": "Muhayyer", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Sengin semâî", "form": "Şarkı", "resim": ""},
            {"id": 18, "eser": "Sen gül eğlen şâd-mân ol", "makam": "Mâhur", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Ağır aksak", "form": "Şarkı", "resim": ""},
            {"id": 19, "eser": "Sevdim seni ey işve-bâz", "makam": "Nihâvend", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Semâî", "form": "Şarkı", "resim": ""},
            {"id": 20, "eser": "Var iken zâtında böyle hüsn ü ân olma nihân", "makam": "Mâhur", "güftekâr": "Mechul", "bestekâr": "Tanbûrî Cemil Bey", "usûl": "Ağır aksak", "form": "Şarkı", "resim": ""}
        ];

        // 3. LİSTELEME
        function tabloyuDoldur(liste) {
            const govde = document.getElementById('liste-govdesi');
            govde.innerHTML = '';
            
            liste.forEach(item => {
                const satir = document.createElement('tr');
                satir.className = "hover:bg-gray-50 cursor-pointer";
                satir.onclick = () => detayGoster(item.id);
                satir.innerHTML = `
                    <td class="px-6 py-4 font-semibold text-blue-600 italic serif text-lg">${item.eser}</td>
                    <td class="px-6 py-4 text-gray-600">${item.güftekâr || "Mechul"}</td>
                    <td class="px-6 py-4 text-gray-600">${item.bestekâr}</td>
                    <td class="px-6 py-4"><span class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold">${item.makam}</span></td>
                `;
                govde.appendChild(satir);
            });
        }

        // 4. ARAMA
        document.getElementById('arama').addEventListener('input', (e) => {
            const aranan = temizle(e.target.value);
            const filtrelenmis = eserler.filter(item => 
                temizle(item.eser).includes(aranan) || 
                temizle(item.makam).includes(aranan)
            );
            tabloyuDoldur(filtrelenmis);
        });

        // 5. DETAY
        function detayGoster(id) {
            const eser = eserler.find(e => e.id === id);
            if (eser) {
                document.getElementById('listeSayfasi').classList.add('hidden');
                document.getElementById('detaySayfasi').classList.remove('hidden');
                document.getElementById('detayAd').innerText = eser.eser;
                document.getElementById('detayBilgi').innerHTML = `
                    <p><b>Makam:</b> ${eser.makam}</p>
                    <p><b>Usûl:</b> ${eser.usûl}</p>
                    <p><b>Bestekâr:</b> ${eser.bestekâr}</p>
                    <p><b>Form:</b> ${eser.form}</p>
                `;
                const nota = document.getElementById('notaAlani');
                nota.innerHTML = eser.resim ? `<img src="${eser.resim}">` : "Nota henüz eklenmedi";
            }
        }

        // Sayfa açılınca listeyi bas
        window.onload = () => tabloyuDoldur(eserler);
    </script>
</body>
</html>
