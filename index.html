<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defter-i M√ªsik√Æ | Tanb√ªr√Æ Cemil Bey Ar≈üivi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .serif { font-family: 'Crimson Pro', serif; }
        .satir-link:hover { background-color: #f8fafc; }
        .makam-format { text-transform: lowercase; display: inline-block; }
        .makam-format::first-letter { text-transform: uppercase; }
    </style>
</head> 
<body class="bg-[#f0f2f5] min-h-screen text-gray-900">

    <div id="listeSayfasi" class="p-4 md:p-8 max-w-6xl mx-auto">
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-2xl font-bold text-gray-800 mb-4 italic serif text-center">Defter-i M√ªsik√Æ Ar≈üivi</h2>
                <input type="text" id="arama" placeholder="Eser, makam veya bestek√¢r ara..." 
                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse text-sm">
                    <thead class="bg-gray-50 border-b border-gray-200 text-gray-500 uppercase text-xs font-semibold">
                        <tr>
                            <th class="px-6 py-4">Eser Ba≈ülƒ±ƒüƒ±</th>
                            <th class="px-6 py-4">G√ºftek√¢r</th>
                            <th class="px-6 py-4">Bestek√¢r</th>
                            <th class="px-6 py-4 hidden md:table-cell">Makam</th>
                            <th class="px-6 py-4 hidden md:table-cell text-right font-mono">Form / Us√ªl</th>
                        </tr>
                    </thead>
                    <tbody id="liste-govdesi" class="divide-y divide-gray-100 bg-white"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="detaySayfasi" class="hidden p-4 md:p-8 max-w-5xl mx-auto">
        <button onclick="anaSayfayaDon()" class="text-amber-800 font-bold mb-6 flex items-center hover:text-amber-600 transition-colors">
            <span class="mr-2 text-xl">‚Üê</span> Ana Sayfaya D√∂n
        </button>
        
        <div class="bg-white p-6 md:p-12 rounded-xl shadow-lg border-t-8 border-amber-800">
            <h1 id="detayAd" class="serif text-4xl md:text-5xl text-stone-800 mb-6 font-bold italic text-center leading-tight"></h1>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-stone-700 text-xl border-y border-stone-100 py-8 my-8 serif">
                <p class="flex justify-between border-b border-stone-50 pb-2"><strong>Makam:</strong> <span id="detayMakam"></span></p>
                <p class="flex justify-between border-b border-stone-50 pb-2"><strong>Us√ªl:</strong> <span id="detayUsul"></span></p>
                <p class="flex justify-between border-b border-stone-50 pb-2"><strong>G√ºftek√¢r:</strong> <span id="detayGufte"></span></p>
                <p class="flex justify-between border-b border-stone-50 pb-2"><strong>Bestek√¢r:</strong> <span id="detayBestekar"></span></p>
                <p class="flex justify-between border-b border-stone-50 pb-2 md:col-span-2"><strong>Form:</strong> <span id="detayForm"></span></p>
            </div>

            <div id="notaAlani" class="mt-8"></div>
        </div>
    </div>

    <script>
        function temizle(metin) {
            if (!metin) return "";
            return metin.toString().replace(/ƒ∞/g, "i").replace(/I/g, "i").toLowerCase()
                .replace(/√¢/g, "a").replace(/√Æ/g, "i").replace(/√ª/g, "u")
                .replace(/ƒ±/g, "i").replace(/ƒü/g, "g").replace(/√º/g, "u")
                .replace(/≈ü/g, "s").replace(/√∂/g, "o").replace(/√ß/g, "c").trim();
        }

        const eserler = [
            {"id": 1, "eser": "Beni b√Æg√¢ne-i h√¢b etti keder", "makam": "S√ªzn√¢k", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aksak", "form": "≈ûarkƒ±", "resim": "notalar/beni_bigane.pdf"},
            {"id": 2, "eser": "Bir nig√¢hƒ±n g√∂nl√ºm√º etti es√Ær-i a≈ükƒ±n √¢h", "makam": "Evc", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aksak", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 3, "eser": "Bir per√Æ-s√Æm√¢ g√ºzelsin h√ºsn√ºne yoktur bah√¢", "makam": "Sult√¢n√Æ-yeg√¢h", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Devr-i hind√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 4, "eser": "Daƒüda tav≈üanlar uyur ninni", "makam": "Hicaz", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Sofyan", "form": "Ninni", "resim": ""},
            {"id": 5, "eser": "Def-i n√¢li≈ü eylerim hep seyr-i ruhs√¢rƒ±nla ben", "makam": "K√ºrd√Æli-hic√¢zk√¢r", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aksak", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 6, "eser": "Fery√¢d ki fery√¢dƒ±ma imd√¢d edecek yok", "makam": "≈ûehnaz", "g√ºftek√¢r": "Nig√¢r Hanƒ±m", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Sengin sem√¢√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 7, "eser": "Gel ey s√¢ki bana sun bir piy√¢le", "makam": "Seg√¢h", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aksak", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 8, "eser": "G√∂rmek ister g√∂zlerim her dem seni", "makam": "H√ºseyn√Æ", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Devr-i hind√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 9, "eser": "G√ºl gonce-i √ºm√Æd gibi gel a√ßƒ±l ey g√ºl", "makam": "G√ºliz√¢r", "g√ºftek√¢r": "Mahmut ≈ûevket √ñzd√∂nmez", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Sengin sem√¢√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 10, "eser": "G√ºlsit√¢ne eyleyip terc√Æh bir v√Ær√¢neyi", "makam": "≈ûevkefz√¢", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Y√ºr√ºk sem√¢√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 11, "eser": "H√¢tƒ±r-ƒ± n√¢≈ü√¢dƒ± gel g√∂r bir nefes ≈ü√¢d et beni", "makam": "Seg√¢h", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aƒüƒ±r aksak", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 12, "eser": "Hep s√¢ye-i vaslƒ±nda g√∂n√ºl ≈ü√¢d olacakken", "makam": "Hicaz", "g√ºftek√¢r": "Tanb√ªr√Æ Cemil Bey", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Sengin sem√¢√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 13, "eser": "Hicrinle f√ºz√ªn olmadan ahz√¢n-ƒ± mez√¢lim", "makam": "K√ºrd√Æli-hic√¢zk√¢r", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aksak", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 14, "eser": "M√¢temzedeyim k√ºlbe-i ahz√¢nƒ±mƒ± gel g√∂r", "makam": "Hicaz", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aksak", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 15, "eser": "Naz√Ærin yok senin ey m√¢h yerde", "makam": "Evc", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aksak sem√¢√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 16, "eser": "Nih√¢ndƒ±r d√Ædeden ger√ßi cem√¢lin", "makam": "M√ºstear", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Y√ºr√ºk sem√¢√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 17, "eser": "P√ºr-lerze olur r√ªyini g√∂rd√ºk√ße cen√¢nƒ±m", "makam": "Muhayyer", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Sengin sem√¢√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 18, "eser": "Sen g√ºl eƒülen ≈ü√¢d-m√¢n ol", "makam": "M√¢hur", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aƒüƒ±r aksak", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 19, "eser": "Sevdim seni ey i≈üve-b√¢z", "makam": "Nih√¢vend", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Sem√¢√Æ", "form": "≈ûarkƒ±", "resim": ""},
            {"id": 20, "eser": "Var iken z√¢tƒ±nda b√∂yle h√ºsn √º √¢n olma nih√¢n", "makam": "M√¢hur", "g√ºftek√¢r": "Mechul", "bestek√¢r": "Tanb√ªr√Æ Cemil Bey", "us√ªl": "Aƒüƒ±r aksak", "form": "≈ûarkƒ±", "resim": ""}
        ];

        function listele(filtre = '') {
            const govde = document.getElementById('liste-govdesi');
            const aramaTerimi = temizle(filtre);
            const sonuc = eserler.filter(item => temizle(item.eser).includes(aramaTerimi) || temizle(item.makam).includes(aramaTerimi));
            
            govde.innerHTML = '';
            sonuc.forEach(item => {
                const satir = document.createElement('tr');
                satir.className = "satir-link cursor-pointer transition-colors hover:bg-gray-50";
                satir.innerHTML = `
                    <td class="px-6 py-4 font-semibold text-blue-600 italic serif text-lg">
                        <a href="?id=${item.id}" onclick="if(!event.ctrlKey && !event.metaKey){ event.preventDefault(); detayGoster(${item.id}); }">
                            ${item.eser}
                        </a>
                    </td>
                    <td class="px-6 py-4 text-gray-600">${item.g√ºftek√¢r || "Mechul"}</td>
                    <td class="px-6 py-4 text-gray-600">${item.bestek√¢r}</td>
                    <td class="px-6 py-4 hidden md:table-cell text-gray-600">
                        <span class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold">${item.makam}</span>
                    </td>
                    <td class="px-6 py-4 hidden md:table-cell text-right text-gray-400 font-mono">${item.form} / ${item.us√ªl}</td>
                `;
                govde.appendChild(satir);
            });
        }

        function detayGoster(id, pushState = true) {
            const eser = eserler.find(e => e.id === id);
            if (eser) {
                document.getElementById('detayAd').innerText = eser.eser;
                document.getElementById('detayMakam').innerText = eser.makam;
                document.getElementById('detayGufte').innerText = eser.g√ºftek√¢r || "Mechul";
                document.getElementById('detayUsul').innerText = eser.us√ªl || "-";
                document.getElementById('detayBestekar').innerText = eser.bestek√¢r;
                document.getElementById('detayForm').innerText = eser.form;

                const notaAlani = document.getElementById('notaAlani');
        const dosya = eser.resim;

        if (dosya && dosya.trim() !== "") {
            notaAlani.innerHTML = `
                <div class="mt-8 p-6 bg-stone-50 rounded-lg border border-stone-200 text-center">
                    <div class="mb-4 text-red-600">
                        <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
                    </div>
                    <a href="${dosya}" target="_blank" 
                       class="inline-flex items-center px-6 py-3 bg-red-700 text-white rounded shadow-md hover:bg-red-800 transition-all font-bold">
                       üìÑ NOTAYI YENƒ∞ SEKMEDE A√á
                    </a>
                </div>`;
        } else {
            notaAlani.innerHTML = `<div class="mt-8 p-10 border-2 border-dashed text-stone-400 text-center">Nota Hen√ºz Eklenmedi</div>`;
        }

                document.getElementById('listeSayfasi').classList.add('hidden');
                document.getElementById('detaySayfasi').classList.remove('hidden');
                if (pushState) { window.history.pushState({id: id}, "", `?id=${id}`); }
                window.scrollTo(0,0);
            }
        }

        function anaSayfayaDon(pushState = true) {
            document.getElementById('detaySayfasi').classList.add('hidden');
            document.getElementById('listeSayfasi').classList.remove('hidden');
            if (pushState) { window.history.pushState({}, "", window.location.pathname); }
        }

        window.addEventListener('popstate', () => {
            const id = new URLSearchParams(window.location.search).get('id');
            if (id) detayGoster(parseInt(id), false); else anaSayfayaDon(false);
        });

        window.onload = () => {
            const id = new URLSearchParams(window.location.search).get('id');
            if (id) detayGoster(parseInt(id), false); else listele();
        };

        document.getElementById('arama').addEventListener('input', (e) => listele(e.target.value));
    </script>
</body>
</html>
