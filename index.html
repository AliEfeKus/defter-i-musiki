<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Defter-i Mûsikî</title>
    <style>
        body { font-family: 'Crimson Pro', serif; background-color: #f4f1ea; padding: 20px; }
        #eser-listesi { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .eser-kartı { background: white; padding: 20px; border-radius: 12px; border-top: 6px solid #8d6e63; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .nota-btn { background: #8d6e63; color: white; border: none; padding: 10px; width: 100%; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        
        /* Modal (Nota Penceresi) Tasarımı */
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); justify-content: center; align-items: center; z-index: 1000; }
        .modal-icerik { background: white; padding: 20px; border-radius: 10px; max-width: 90%; max-height: 90%; text-align: center; position: relative; }
        .kapat { position: absolute; top: 10px; right: 20px; font-size: 30px; cursor: pointer; }
        #modal-resim { max-width: 100%; max-height: 70vh; display: block; margin: 10px auto; }
    </style>
</head>
<body>

<h1 style="text-align:center">Defter-i Mûsikî</h1>
<div id="eser-listesi"></div>

<div id="modal">
    <div class="modal-icerik">
        <span class="kapat" onclick="modalKapat()">&times;</span>
        <h2 id="modal-baslik"></h2>
        <img id="modal-resim" src="" alt="Nota bulunamadı">
        <p id="modal-hata" style="color:red; display:none;">Bu eserin nota görseli henüz arşive eklenmemiştir.</p>
        <a id="modal-kaynak" href="#" target="_blank" style="color:#8d6e63; text-decoration:underline;">Divanmakam Kaynağına Git</a>
    </div>
</div>

<script src="data.js"></script>
<script>
    function goster() {
        const liste = document.getElementById('eser-listesi');
        liste.innerHTML = '';
        
        eserler.forEach(item => {
            const kart = document.createElement('div');
            kart.className = 'eser-kartı';
            kart.innerHTML = `
                <h3>${item.eser}</h3>
                <p><strong>Makam:</strong> ${item.makam}</p>
                <button class="nota-btn" onclick="notaAc('${item.eser}', '${item.resim}', '${item.kaynak}')">Notayı Gör</button>
            `;
            liste.appendChild(kart);
        });
    }

    function notaAc(baslik, resimYolu, kaynakYolu) {
        document.getElementById('modal').style.display = 'flex';
        document.getElementById('modal-baslik').innerText = baslik;
        const img = document.getElementById('modal-resim');
        const hata = document.getElementById('modal-hata');
        const kaynak = document.getElementById('modal-kaynak');

        kaynak.href = kaynakYolu;

        if (resimYolu && resimYolu !== "") {
            img.src = resimYolu;
            img.style.display = 'block';
            hata.style.display = 'none';
        } else {
            img.style.display = 'none';
            hata.style.display = 'block';
        }
    }

    function modalKapat() {
        document.getElementById('modal').style.display = 'none';
    }

    window.onclick = function(event) {
        if (event.target == document.getElementById('modal')) modalKapat();
    }

    window.onload = goster;
</script>
</body>
</html>
