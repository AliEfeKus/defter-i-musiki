<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Tanbûrî Cemil Bey – Defter-i Mûsikî</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.tailwindcss.com" rel="stylesheet">
<script src="eserler.js"></script>

<style>
body{background:#f4f1ea;font-family:serif;}

.eser-satir{
  padding:10px;
  border-bottom:1px solid #ddd;
  cursor:pointer;
}
.eser-satir:hover{
  background:#fdf3d7;
}

.cemil-hero{
  background:url("tanburicemilbey/cemil-bey-tanburi-1.jpg") center 70%/cover no-repeat;
  height:300px;
  position:relative;
}
.cemil-overlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.55);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}
.cemil-overlay h1{
  color:#f5e6c8;
  font-size:48px;
}
.cemil-overlay p{
  color:#ddd;
  font-style:italic;
}
</style>
</head>

<body>

<header class="cemil-hero">
  <div class="cemil-overlay">
    <h1>Tanbûrî Cemil Bey</h1>
    <p>Külliyat & Nota Arşivi</p>
  </div>
</header>

<div class="max-w-5xl mx-auto bg-white shadow-lg rounded-lg -mt-16 relative z-10 p-6">

<div id="listeSayfasi"></div>

<div id="detaySayfasi" class="hidden"></div>

</div>

<script>

/* SLUG */
function slugYap(metin){
  return metin.toLowerCase()
  .replaceAll("ç","c")
  .replaceAll("ğ","g")
  .replaceAll("ı","i")
  .replaceAll("ö","o")
  .replaceAll("ş","s")
  .replaceAll("ü","u")
  .replace(/[^a-z0-9]+/g,"-")
  .replace(/^-|-$/g,"");
}

/* LİSTELE */
function listele(){
  const alan=document.getElementById("listeSayfasi");
  const detay=document.getElementById("detaySayfasi");
  detay.classList.add("hidden");
  alan.innerHTML="";

  eserler.forEach(e=>{
    alan.innerHTML+=`
      <div class="eser-satir">
        <a href="#${slugYap(e.eser)}"
           onclick="detayGoster(${e.id});return false;">
           ${e.eser} – ${e.makam}
        </a>
      </div>
    `;
  });
}

/* DETAY */
function detayGoster(id){
  const eser=eserler.find(x=>x.id===id);
  if(!eser) return;

  location.hash=slugYap(eser.eser);

  const alan=document.getElementById("detaySayfasi");
  const liste=document.getElementById("listeSayfasi");

  liste.innerHTML="";
  alan.classList.remove("hidden");

  alan.innerHTML=`
  <button onclick="listele()">← Geri</button>

  <h2 class="text-3xl mt-4">${eser.eser}</h2>

  <p><b>Makam:</b> ${eser.makam}</p>
  <p><b>Bestekâr:</b> ${eser.bestekâr}</p>
  <p><b>Usûl:</b> ${eser.usûl}</p>
  <p><b>Form:</b> ${eser.form}</p>

  <p class="mt-4">${eser.güfte && eser.güfte!=="Yok" ? eser.güfte : ""}</p>
  `;
}

/* ROUTER */
function router(){
  const hash=location.hash.replace("#","");
  if(hash){
    const eser=eserler.find(e=>slugYap(e.eser)===hash);
    if(eser){
      detayGoster(eser.id);
      return;
    }
  }
  listele();
}

window.addEventListener("load",router);
window.addEventListener("hashchange",router);

</script>

</body>
</html>
